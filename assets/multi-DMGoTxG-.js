import{L as f}from"./lobby-DK9NN18H.js";const x="https://chbibdnqynilfuczbygg.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNoYmliZG5xeW5pbGZ1Y3pieWdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3MDc0OTQsImV4cCI6MjA3MDI4MzQ5NH0.VuwTKXiU1Yx4C_fQCIp5X20m8SupxBkCKhQzN7Vqe20",d=new f(x,g),s=document.getElementById("room-list");d.onUpdate=n=>{if(s){if(!n.length){s.innerHTML='<div class="muted" id="room-empty" style="grid-column:1/-1;display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;padding:36px 12px;text-align:center;">현재 대기중인 방이 없습니다.<br/></div>';const e=document.getElementById("room-empty-create");e&&e.addEventListener("click",()=>{u()});return}s.innerHTML=n.map(e=>`<button class="card" data-join="${e.id}" data-title="${e.title||"Room"}" style="display:flex;flex-direction:column;justify-content:space-between;text-align:left;padding:16px;height:110px;background:#0f142f;border:1px solid #2a2f66;border-radius:12px;color:inherit;cursor:pointer;"><div style="font-weight:700;font-size:14px;">${e.title||"Room"}</div><div style="display:flex;justify-content:space-between;font-size:12px;color:#9aa0c3;"><span>${e.host}</span><span>${e.players}/${e.max}</span></div></button>`).join(""),s.querySelectorAll("button[data-join]").forEach(e=>e.addEventListener("click",o=>{const t=o.currentTarget,i=t&&t.dataset?t.dataset.join:null,a=t&&t.dataset?t.dataset.title:null;i&&(localStorage.setItem("tetris_room",i),localStorage.setItem("tetris_room_title",a||"Room"),localStorage.setItem("tetris_room_created","false"),window.location.href="../game/index.html")}))}};const m=localStorage.getItem("tetris_nick")||"";m?d.join(m):h();function h(){const n=document.createElement("div");n.style.cssText="position:fixed;inset:0;background:rgba(0,0,0,0.5);display:grid;place-items:center;z-index:2000;";const e=document.createElement("div");e.className="panel",e.style.cssText="width:min(480px,92vw);",e.innerHTML='<h2 style="margin:0 0 8px;">닉네임 설정</h2><p class="muted" style="margin:0 0 8px;">게임에서 표시될 이름을 입력하세요.</p>';const o=document.createElement("div");o.className="row";const t=document.createElement("input");t.className="input",t.placeholder="Nickname",t.style.flex="1 1 auto";const i=document.createElement("button");i.textContent="확인",o.appendChild(t),o.appendChild(i),e.appendChild(o),n.appendChild(e),document.body.appendChild(n),t.focus();function a(){const l=(t.value||"").trim()||"Anonymous";localStorage.setItem("tetris_nick",l),d.join(l),document.body.removeChild(n)}i.addEventListener("click",a),t.addEventListener("keydown",l=>{l.key==="Enter"&&a()})}function u(){const n=document.createElement("div");n.style.cssText="position:fixed;inset:0;background:rgba(0,0,0,0.5);display:grid;place-items:center;z-index:2000;";const e=document.createElement("div");e.className="panel",e.style.cssText="width:min(480px,92vw);",e.innerHTML='<h2 style="margin:0 0 8px;">방 만들기</h2><p class="muted" style="margin:0 0 8px;">멀티플레이 방 제목을 입력하세요.</p>';const o=document.createElement("div");o.className="row";const t=document.createElement("input");t.className="input",t.placeholder="방 제목",t.style.flex="1 1 auto";const i=document.createElement("button");i.textContent="만들기";const a=document.createElement("button");a.textContent="취소",a.style.marginLeft="4px",o.appendChild(t),o.appendChild(i),o.appendChild(a),e.appendChild(o),n.appendChild(e),document.body.appendChild(n),t.focus();function l(){const c=(t.value||"").trim();if(!c){alert("방 제목을 입력하세요"),t.focus();return}const y=d.createRoom(c);localStorage.setItem("tetris_room",y),localStorage.setItem("tetris_room_title",c),localStorage.setItem("tetris_room_created","true"),window.location.href="../game/index.html"}function r(){document.body.removeChild(n)}i.addEventListener("click",l),a.addEventListener("click",r),t.addEventListener("keydown",c=>{c.key==="Enter"&&l(),c.key==="Escape"&&r()}),n.addEventListener("click",c=>{c.target===n&&r()})}const p=document.getElementById("btn-create-room");p&&p.addEventListener("click",()=>{u()});
